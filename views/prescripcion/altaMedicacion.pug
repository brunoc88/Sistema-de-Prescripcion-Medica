extends ../layout2 

block content 

    // Mensajes de notificación
    if message
        #notification.alert.alert-success
            | #{message}
    if errorMessage
        #notification.alert.alert-danger
            | #{errorMessage}

    div.container
        div.row.justify-content-center
            div.col-md-6.col-12
                h1.text-center.mb-4 Prescripcion de Medicamentos
                form(action="/prescripcion/altaMedicacion" method="post" class="needs-validation")
                    input(type="hidden" name="id_turno" value=`${turno.idTurno}`)
                    div(class="mb-3")
                        label(for="paciente" class="form-label") Paciente: 
                        input(type="text" value = `${paciente.nombre + ' ' + paciente.apellido}` class="form-control" readonly) 
                    div(class="mb-3")
                        label(for="obra" class="form-label") Obra Social / Plan: 
                        input(type="text" value = `${paciente.Plan.ObraSocial.nombre + ' / ' + paciente.Plan.nombre}` class="form-control" readonly) 

                    div(class="mb-3")
                        label(for="medicamentos" class="form-label") Medicamento:
                        select(name="lista" class="form-control")
                            if medicamentos && medicamentos.length > 0
                                each medicamento in medicamentos
                                    option(value=medicamento.idMedicamento) #{medicamento.nombre} - #{medicamento.concentracion} - #{medicamento.Forma.nombre}
                            else
                                option(value="" disabled) No hay medicamentos disponibles
                    div(class="mb-3")
                        label(for="nombre comercial" class="form-label") Nombre Comercial:
                        input(type="text" name="nombreComercial" class="form-control" )

                    div(class="mb-3")
                        label(for="dosis" class="form-label") Dosis:
                        textarea(name="dosis" class="form-control" required rows="4" placeholder="Escriba la dosis aqui...")

                    div(class="mb-3")
                        label(for="administracion" class="form-label") Administracion:
                        textarea(name="administracion" class="form-control" required rows="4" placeholder="Escriba la indicaciones aquí...")
     
                    div(class="mb-3")
                        label(for="diagnostico" class="form-label") Diagnostrico:
                        textarea(name="diagnostico" class="form-control" required rows="4" placeholder="Escriba el diagnostico aquí...")

                    div(class="mb-3")
                        label(for='vigencia' class="form-label fw-bold") Vigencia:
                        input#fecha.form-control(type="date" name="fechaVigencia" min=`${new Date().toISOString().split('T')[0]}`)
                    div(class="d-grid gap-2")
                        button(type="submit" class="btn btn-primary") Guardar
                        a(href="/turnos/misTurnos" class="btn btn-secondary") Volver
